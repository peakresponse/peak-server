<router-outlet></router-outlet>
<shared-command-header [class.d-none]="route.firstChild">
  <a *ngIf="!isEditing" class="command-header__plain" (click)="onCancel()">Done</a>
  <a *ngIf="isEditing" class="command-header__plain" (click)="isEditing = false">Cancel</a>
  <h3 class="command-header__title">Event Details</h3>
  <a *ngIf="!isEditing" class="command-header__primary" (click)="isEditing = true">Edit</a>
  <span *ngIf="isEditing" class="command-header__primary"></span>
</shared-command-header>
<main [class.d-none]="route.firstChild">
  <shared-form
    *ngIf="id"
    [id]="id"
    #form
    class="form--responsive"
    [preTransformRecord]="preTransformRecord"
    [transformRecord]="transformRecord"
    (update)="onUpdate($event)"
    type="events"
    [hideButtons]="!isEditing"
    (update)="isEditing = false">
    <ng-template let-record="record" let-error="error">
      <app-event-form *ngIf="isEditing" (createVenue)="onCreateVenue($event)" [record]="record" [error]="error"></app-event-form>
      <ng-container *ngIf="!isEditing">
        <div class="mb-3">
          <label>Name</label>
          <h3>{{ record.name }}</h3>
        </div>
        <div *ngIf="record.description" class="mb-3">
          <label>Description</label>
          <h3>{{ record.description }}</h3>
        </div>
        <div class="mb-3">
          <label>Start</label>
          <h3>{{ record.startTime | date: 'medium' }}</h3>
        </div>
        <div class="mb-3">
          <label>End</label>
          <h3>{{ record.endTime | date: 'medium' }}</h3>
        </div>
        <div class="mb-3">
          <label>Venue</label>
          <h3>{{ record.venue?.name }}</h3>
        </div>
        <h4>Venue Details</h4>
        <div class="mb-3">
          <label>Address</label>
          <h3>
            {{ record.venue?.address1 }}<br />
            <ng-container *ngIf="record.venue?.address2">{{ record.venue?.address2 }}<br /></ng-container>
            {{ record.venue?.city.featureName }}, {{ record.venue?.state.abbr }} {{ record.venue?.zipCode }}
          </h3>
        </div>
      </ng-container>
    </ng-template>
  </shared-form>
</main>
