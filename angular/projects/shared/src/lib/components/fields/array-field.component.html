<div class="array-field" [class.array-field--noclear]="!showClearButton">
  <div
    class="form-field form-field--noclear"
    [class.form-field--disabled]="isDisabled"
    [class.form-field--editing]="isEditing"
    [class.form-field--focused]="isFocused"
    [class.form-field--invalid]="isInvalid"
    [class.form-field--nonempty]="isNonEmpty"
    [class.form-field--unconfirmed]="isUnconfirmed"
    (update)="onSorted($event)"
    [sortablejs]="value"
    [sortablejsOptions]="{ sort: isEditing }"
  >
    <label
      >{{ label }}
      <ng-container *ngIf="headerTemplate">
        <ng-template [ngTemplateOutlet]="headerTemplate"></ng-template> </ng-container
    ></label>
    <ng-container *ngIf="value && value.length > 0">
      <div *ngFor="let item of value; let i = index" [attr.data-index]="i" class="array-field__item" (click)="onClick($event)">
        <ng-template
          [ngTemplateOutlet]="itemTemplate"
          [ngTemplateOutletContext]="{item, removeItem: onRemoveItem, updateItem: onUpdateItem}"
        ></ng-template>
      </div>
    </ng-container>
    <div *ngIf="formTemplate" class="form-field__content">
      <ng-template [ngTemplateOutlet]="formTemplate" [ngTemplateOutletContext]="{ addItem: onAddItem }"></ng-template>
    </div>
  </div>
</div>
