<div class="form-field form-field--search"
  [class.form-field--disabled]="isDisabled"
  [class.form-field--editing]="isEditing"
  [class.form-field--focused]="isFocused"
  [class.form-field--invalid]="isInvalid"
  [class.form-field--nonempty]="isNonEmpty"
  [class.form-field--unconfirmed]="isUnconfirmed"
  (click)="onClick($event)">
  <label *ngIf="label" [for]="derivedId">{{label}}</label>
  <ng-template #rt let-r="result" let-t="term">{{r}}</ng-template>
  <input *ngIf="ngbTypeahead" #inputEl type="text" [id]="derivedId" [name]="derivedName"
    [placeholder]="placeholder"
    [disabled]="isDisabled"
    [readonly]="!isFocusable || !isEditing"
    [tabindex]="isFocusable && isEditing ? 0 : -1"
    (focus)="onFocus($event)" (blur)="onBlur($event)"
    [ngbTypeahead]="ngbTypeahead" [inputFormatter]="inputFormatter" [resultTemplate]="resultTemplate ?? rt"
    [(ngModel)]="value" />
  <input *ngIf="!ngbTypeahead" #inputEl type="text" [id]="derivedId" [name]="derivedName"
    [placeholder]="placeholder"
    [disabled]="isDisabled"
    [readonly]="!isFocusable || !isEditing"
    [tabindex]="isFocusable && isEditing ? 0 : -1"
    (focus)="onFocus($event)" (blur)="onBlur($event)"
    [shared-debounced]="debounceTime" (debouncedValueChange)="this.debouncedValueChange.emit($event)"
    [(ngModel)]="value" />
</div>
<div class="invalid-feedback" *ngIf="errorMessage as msg">{{msg}}</div>
<ng-template [ngTemplateOutlet]="template" [ngTemplateOutletContext]="{isEditing: isEditing, isFocusable: isFocusable, isFocused: isFocused, source: source, target: target}"></ng-template>
